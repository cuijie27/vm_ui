<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title></title>
		<script src="../js/mui.min.js"></script>
		<link href="../css/mui.min.css" rel="stylesheet" />
		<script type="text/javascript" charset="utf-8">
			mui.init();
		</script>
		<style>
			/*跨webview需要手动指定位置*/
			
			header.mui-bar {
				display: none!important;
			}
			.mui-bar-nav~.mui-content {
				padding: 0!important;
			}
			#topPopover {
				position: fixed;
				top: 16px;
				right: 6px;
			}
			#topPopover .mui-popover-arrow {
				left: auto;
				right: 6px;
			}
			p {
				text-indent: 22px;
			}
			/*
			 * 这个需要注释掉，会影响，tab下面文字的位置。
			span.mui-icon {
				font-size: 14px;
				color: #007aff;
				margin-left: -15px;
				padding-right: 10px;
			}*/
			.mui-popover {
				height: 300px;
			}
			.mui-content {
				padding: 10px;
			}
		</style>
	</head>

	<body>
		<div class="mui-content">
			<ul id="suowenGrid" class="mui-table-view mui-grid-view mui-grid-9">
				<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-3">
					<a href="../application/receipt/receipt-fill-in-form.html">
						<span class="mui-icon mui-icon-home"></span>
						<div class="mui-media-body">收货</div>
					</a>
				</li>
				<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-3">
					<a href="../delivery/delivery_goods.html">
						<span class="mui-icon mui-icon-email"><span class="mui-badge">5</span></span>
						<div class="mui-media-body">发货</div>
					</a>
				</li>
				<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-3">
					<a href="../check/check_goods_list.html">
						<span class="mui-icon mui-icon-chatbubble"></span>
						<div class="mui-media-body">盘点</div>
					</a>
				</li>
				<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-3">
					<a href="../collection/receive_money_list.html">
						<span class="mui-icon mui-icon-location"></span>
						<div class="mui-media-body">收款</div>
					</a>
				</li>
				<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-3">
					<a href="../payment/plan_payment_list.html">
						<span class="mui-icon mui-icon-search"></span>
						<div class="mui-media-body">打款</div>
					</a>
				</li>
				<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-3">
					<a href="../payment/advance_payment.html">
						<span class="mui-icon mui-icon-phone"></span>
						<div class="mui-media-body">预付</div>
					</a>
				</li>
				<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-3">
					<a href="../payment/advances_received.html">
						<span class="mui-icon mui-icon-phone"></span>
						<div class="mui-media-body">预收</div>
					</a>
				</li>
				<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-3">
					<a href="../reconciliation/list.html">
						<span class="mui-icon mui-icon-phone"></span>
						<div class="mui-media-body">对账</div>
					</a>
				</li>
				<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-3">
					<a href="#">
						<span class="mui-icon mui-icon-gear"></span>
						<div class="mui-media-body">报表</div>
					</a>
				</li>
				<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-3">
					<a href="#">
						<span class="mui-icon mui-icon-info"></span>
						<div class="mui-media-body">合作伙伴</div>
					</a>
				</li>
				<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-3">
					<a href="#">
						<span class="mui-icon mui-icon-more"></span>
						<div class="mui-media-body">系统管理 </div>
					</a>
				</li>
				<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-3">
					<a href="../list.html">
						<span class="mui-icon mui-icon-more"></span>
						<div class="mui-media-body">ListDemo</div>
					</a>
				</li>
			</ul>
		</div>

		<!-- ---------------右上角弹出菜单---------------------------->
		<div id="topPopover" class="mui-popover">
			<div class="mui-popover-arrow"></div>
			<div class="mui-scroll-wrapper">
				<div class="mui-scroll">
					<ul class="mui-table-view">
						<li class="mui-table-view-cell">
							<a href="#">Item1</a>
						</li>
						<li class="mui-table-view-cell"><a href="#">Item2</a>
						</li>
						<li class="mui-table-view-cell"><a href="#">Item3</a>
						</li>
						<li class="mui-table-view-cell"><a href="#">Item4</a>
						</li>
						<li class="mui-table-view-cell"><a href="#">Item5</a>
						</li>
						<li class="mui-table-view-cell"><a href="#">Item6</a>
						</li>
						<li class="mui-table-view-cell"><a href="#">Item7</a>
						</li>
						<li class="mui-table-view-cell"><a href="#">Item8</a>
						</li>
						<li class="mui-table-view-cell"><a href="#">Item9</a>
						</li>
						<li class="mui-table-view-cell"><a href="#">Item10</a>
						</li>
					</ul>
				</div>
			</div>
		</div>
		<!-- ---------------右上角弹出菜单---------------------------->

		<script>
			var templates = {};
				var getTemplate = function(name, header, content) {
					var template = templates[name];
					if (!template) {
						//预加载共用父模板；
						var headerWebview = mui.preload({
							url: header,
							id: name + "-main",
							styles: {
								popGesture: "hide",
							},
							extras: {
								mType: 'main'
							}
						});
						//预加载共用子webview
						var subWebview = mui.preload({
							url: !content ? "" : content,
							id: name + "-sub",
							styles: {
								top: '45px',
								bottom: '0px',
							},
							extras: {
								mType: 'sub'
							}
						});
						subWebview.addEventListener('loaded', function() {
							setTimeout(function() {
								subWebview.show();
							}, 50);
						});
						subWebview.hide();
						headerWebview.append(subWebview);
						//iOS平台支持侧滑关闭，父窗体侧滑隐藏后，同时需要隐藏子窗体；
						if (mui.os.ios) { //5+父窗体隐藏，子窗体还可以看到？不符合逻辑吧？
							headerWebview.addEventListener('hide', function() {
								subWebview.hide("none");
							});
						}
						templates[name] = template = {
							name: name,
							header: headerWebview,
							content: subWebview,
						};
					}
					return template;
				};
				var initTemplates = function() {
					getTemplate('default', '../examples/template.html');
				};
				mui.plusReady(function() {
					//初始化模板
					initTemplates(); //预加载所有模板	
					//关闭splash页面；
					plus.navigator.closeSplashscreen();
				});
		</script>
		<script>
			var aniShow = "pop-in";
			//只有ios支持的功能需要在Android平台隐藏；
			if (mui.os.android) {
				var list = document.querySelectorAll('.ios-only');
				if (list) {
					for (var i = 0; i < list.length; i++) {
						list[i].style.display = 'none';
					}
				}
				//Android平台暂时使用slide-in-right动画
				aniShow = "slide-in-right"
			}
			
			mui('#suowenGrid').on('tap', 'a', function() {
				var id = this.getAttribute('href');
				var href = this.href;
				
				//console.log("id is "+id+"\n href is "+href);
				
				mui.openWindow({
					id: id,
					url: this.href,
					show: {
						aniShow: aniShow
					},
					waiting: {
						autoShow:true,//自动显示等待框，默认为true
						title:'正在加载...',//等待对话框上显示的提示内容
					}
				});
				/*
				mui.back();
				mui.fire(opener,"goodsSelListMsg",{
					msg:msgStr
				});
				*/
				/*
				//TODO  by chb 当初这么设计，是为了一个App中有多个模板，目前仅有一个模板的情况下，实际上无需这么复杂
				//使用父子模板方案打开的页面
				//获得共用模板组
				var template = getTemplate('default');
				//判断是否显示右上角menu图标；
				var showMenu = ~href.indexOf('popovers.html') ? true : false;
				//获得共用父模板
				var headerWebview = template.header;
				//获得共用子webview
				var contentWebview = template.content;
				var title = this.innerText.trim();
				//通知模板修改标题，并显示隐藏右上角图标；
				mui.fire(headerWebview, 'updateHeader', {
					title: title,
					showMenu: showMenu
				});
				var reload = true;
				if (!template.loaded) {
					if (contentWebview.getURL() != this.href) {
						contentWebview.loadURL(this.href);
					} else {
						reload = false;
					}
				} else {
					reload = false;
				}
				(!reload) && contentWebview.show();
				
				headerWebview.show(aniShow, 150);*/
			});
		</script>
	</body>

</html>